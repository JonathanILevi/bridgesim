<link rel="import" href="deps.html">
<link rel="import" href="input.html">
<link rel="import" href="map.html">
<link rel="import" href="nav.html">
<link rel="import" href="thrust.html">
<link rel="import" href="power.html">
<link rel="import" href="webrtc-server.html">
<link rel="import" href="webrtc-client.html">

<dom-module id="bridgesim-game">
  <template>
    <section>
      <label>Server: <input type="checkbox" checked="{{isServer::change}}"></label>
      <br><br>

      <template is="dom-if" if="[[isClient]]" restamp="true">
        <bridgesim-webrtc-client id="client"></bridgesim-webrtc-client>

        <button on-tap="makeOffer">make offer</button>
        <input id="offer" disabled="true" value="{{offer}}">
        <br><br>

        <input id="answer" value="{{answer::change}}">
        <button on-tap="setAnswer">set answer</button>
      </template>

      <template is="dom-if" if="[[isServer]]" restamp="true">
        <bridgesim-webrtc-server id="server"></bridgesim-webrtc-server>

        <input id="offer" value="{{offer::change}}">
        <button on-tap="acceptOffer">offer -&gt; answer</button>
        <input id="answer" value="{{answer}}">
      </template>

      <br><br>

      <input id="msg" value="{{msg::change}}">
      <button on-tap="sendMessage">send message</button>
    </section>
    <br>

    <bridgesim-input id="input" ship="[[ship]]"
      on-next-ship="nextShip" on-prev-ship="prevShip">
    </bridgesim-input>

    <bridgesim-map id="map" size="[[size]]" ships="[[ships]]" ship="[[ship]]">
    </bridgesim-map>

    <bridgesim-nav id="nav" ship="[[ship]]"></bridgesim-nav>
    <bridgesim-thrust id="thrust" ship="[[ship]]"></bridgesim-thrust>
    <bridgesim-power id="power" ship="[[ship]]"></bridgesim-power>
  </template>

  <script src="game.js"></script>
</dom-module>
